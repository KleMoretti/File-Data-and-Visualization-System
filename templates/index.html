{% extends "base.html" %}
{% block title %}{% if table_html %}æ•°æ®é¢„è§ˆ{% else %}ä¸Šä¼ æ•°æ®{% endif %} â€“ æ•°æ®åˆ†æç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4">{% if table_html %}æ•°æ®é¢„è§ˆï¼ˆå‰ 10 è¡Œï¼‰{% else %}ä¸Šä¼ æ•°æ®{% endif %}</h2>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="alert alert-warning">
        {% for msg in messages %}<div>{{ msg }}</div>{% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  {% if not table_html %}
    <!-- ä¸Šä¼ è¡¨å• -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
          <div id="drop-zone" class="text-center mb-3">
            <p class="mb-0">æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
            <input
              type="file" id="datafile" name="datafile"
              accept=".csv,.xls,.xlsx" required hidden
            >
            <div id="file-name"></div>
          </div>
          <button type="submit" class="btn btn-success d-block mx-auto">ä¸Šä¼ å¹¶é¢„è§ˆ</button>
        </form>
      </div>
    </div>
  {% else %}
    <!-- é¢„è§ˆè¡¨æ ¼ -->
    <div class="card shadow-sm mt-4">
      <div class="card-body">
        <h3 class="card-title">æ•°æ®é¢„è§ˆï¼ˆå‰10è¡Œï¼‰</h3>
        <div class="table-responsive">
          {{ table_html | safe }}
        </div>
      </div>
    </div>
    <!-- è·³è½¬æŒ‰é’® -->
    <div class="mb-4">
      <a href="{{ url_for('clean') }}" class="btn btn-primary me-2">ğŸ‘‰ æ•°æ®æ¸…æ´—</a>
      <a href="{{ url_for('analyze') }}" class="btn btn-secondary">ğŸ‘‰ æ•°æ®åˆ†æ</a>
    </div>
  {% endif %}
</div>
{% endblock %}
